# 🚚 Dispatch Load Balancer
This project is a **delivery dispatch optimization system** built with Spring Boot. It intelligently assigns delivery orders to available vehicles based on their current location, capacity, and order priority using the **Haversine distance algorithm**.

---
## 📌 Key Features

✅ RESTful APIs for managing orders and vehicles  
✅ Real-time dispatch plan generation  
✅ Intelligent allocation using geospatial Haversine formula  
✅ Priority-based delivery (HIGH > MEDIUM > LOW)  
✅ Modular, clean architecture with proper DTOs, validation, and exception handling  
✅ JUnit-based TDD test coverage  
✅ Enterprise-level design principles

---

## 🛠️ Tech Stack

| Layer           | Technology           |
|----------------|----------------------|
| Backend         | Java 17, Spring Boot |
| Persistence     | Spring Data JPA, MySQL |
| Validation      | Jakarta Bean Validation (JSR-380) |
| JSON Handling   | Jackson |
| Testing         | JUnit 5, Mockito     |
| Build Tool      | Maven                |

---

## ⚙️ Setup & Run

### 1. Clone the Repo

```
git clone https://github.com/your-username/dispatch-load-balancer.git
cd dispatch-load-balancer
```

### 2. Configure the DB (MySQL)
Make sure your application.properties file contains the following configuration:
```
spring.datasource.url=jdbc:mysql://localhost:3306/dispatch_db
spring.datasource.username=root
spring.datasource.password=your_password
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
```

### 3. Run the App
```mvn spring-boot:run```
API base URL: http://localhost:8080/api/dispatch

## 🧪 API Endpoints

### 🚚 Save Orders

**POST** `/api/dispatch/orders`

**Request Body:**

```
{
  "orders": [
    {
      "orderId": "O1",
      "latitude": 12.9716,
      "longitude": 77.5946,
      "address": "Bangalore",
      "packageWeight": 10.5,
      "priority": "HIGH"
    }
  ]
}
```

### 🚛 Save Vehicles

**POST**  `/api/dispatch/vehicles`

**Request Body:**
```
{
  "vehicles": [
    {
      "vehicleId": "V1",
      "capacity": 100,
      "currentLatitude": 12.9716,
      "currentLongitude": 77.5946,
      "currentAddress": "Bangalore"
    }
  ]
}
```

### 📦 Get Dispatch Plan

**GET**  `/api/dispatch/plan`

**Response:**
```
{
  "status": "success",
  "message": "Dispatch plan generated.",
  "data": {
    "dispatchPlan": [
      {
        "vehicleId": "V1",
        "totalLoad": 10.5,
        "totalDistance": "2.3 km",
        "assignedOrders": [...]
      }
    ]
  }
}
```
🧠 Dispatch Logic
- The dispatch plan is generated by following a step-by-step optimization strategy:
  - Fetch all unassigned orders from the database.
  - Sort orders by priority: HIGH > MEDIUM > LOW.

- For each order:
  - Identify all vehicles with enough remaining capacity.
  - Calculate the Haversine distance between the vehicle and order.
  - Select the nearest eligible vehicle.
  - Assign the order and update the vehicle’s remaining capacity.
  - Return the complete dispatch plan with assigned orders.

✅ Key Outcomes:
  - 🚗 Minimum travel distance
  - 📦 Optimized vehicle load
  - ⏱️ Priority-aware delivery handling
